{"version":3,"sources":["middleware/index.js"],"names":["validation","cmd","config","routes","get","req","res","json","name","version","description","homepage","process","versions","node","console","log","sendStatus","post","validateParams","exec"],"mappings":";;;;;;AAAA;;AACA;;IAAYA,U;;AACZ;;IAAYC,G;;AACZ;;;;AACA;;;;;;;;kBAEe,UAAEC,MAAF,EAAc;AAC3B,MAAIC,SAAS,sBAAb;;AAEAA,SAAOC,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC5BA,QAAIC,IAAJ,CAAU;AACRC,YAAM,kBAAIA,IADF;AAERC,eAAS,kBAAIA,OAFL;AAGRC,mBAAa,kBAAIA,WAHT;AAIRC,gBAAU,kBAAIA;AAJN,KAAV;AAMD,GAPD;;AASAR,SAAOC,GAAP,CAAY,OAAZ,EAAqB,UAAEC,GAAF,EAAOC,GAAP,EAAgB;AACnCA,QAAIC,IAAJ,CAAU;AACR,iBAAWK,QAAQC,QAAR,CAAiBC;AADpB,KAAV;AAGD,GAJD;;AAMAX,SAAOC,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC5BS,YAAQC,GAAR,CAAY,kBAAZ;AACAV,QAAIW,UAAJ,CAAe,GAAf;AACD,GAHD;;AAKAd,SAAOe,IAAP,CAAa,UAAb,EACElB,WAAWmB,cAAX,EADF,EAEElB,IAAImB,IAAJ,EAFF;;AAKAjB,SAAOC,GAAP,CAAY,QAAZ,EAAsB,UAAEC,GAAF,EAAOC,GAAP,EAAgB;AACpCA,QAAIW,UAAJ,CAAgB,GAAhB;AACD,GAFD;;AAIAd,SAAOC,GAAP,CAAY,OAAZ,EAAqB,UAAEC,GAAF,EAAOC,GAAP,EAAgB;AACnCA,QAAIW,UAAJ,CAAgB,GAAhB;AACD,GAFD;;AAIAd,SAAOC,GAAP,CAAY,WAAZ,EAAyB,UAAEC,GAAF,EAAOC,GAAP,EAAgB;AACvCA,QAAIW,UAAJ,CAAgB,GAAhB;AACD,GAFD;;AAIAd,SAAOC,GAAP,CAAY,WAAZ,EAAyB,UAAEC,GAAF,EAAOC,GAAP,EAAgB;AACvCA,QAAIW,UAAJ,CAAgB,GAAhB;AACD,GAFD;;AAIAd,SAAOC,GAAP,CAAY,SAAZ,EAAuB,UAAEC,GAAF,EAAOC,GAAP,EAAgB;AACrCA,QAAIW,UAAJ,CAAgB,GAAhB;AACD,GAFD;;AAIA,SAAOd,MAAP;AACD,C","file":"index.js","sourcesContent":["import { Router } from 'express';\nimport * as validation from './validation';\nimport * as cmd from './cmd';\nimport execa from 'execa';\nimport pkg from './../../package.json';\n\nexport default ( config ) => {\n  let routes = Router();\n\n  routes.get('/', (req, res) => {\n    res.json( {\n      name: pkg.name,\n      version: pkg.version,\n      description: pkg.description,\n      homepage: pkg.homepage\n    })\n  });\n\n  routes.get( '/info', ( req, res ) => {\n    res.json( {\n      \"node.js\": process.versions.node\n    });\n  } );\n\n  routes.get('/', (req, res) => {\n    console.log('fetching default');\n    res.sendStatus(200);\n  });\n\n  routes.post( '/migrate',\n    validation.validateParams(),\n    cmd.exec()\n  );\n\n  routes.get( '/clean', ( req, res ) => {\n    res.sendStatus( 200 );\n  } );\n\n  routes.get( '/info', ( req, res ) => {\n    res.sendStatus( 200 );\n  } );\n\n  routes.get( '/validate', ( req, res ) => {\n    res.sendStatus( 200 );\n  } );\n\n  routes.get( '/baseline', ( req, res ) => {\n    res.sendStatus( 200 );\n  } );\n\n  routes.get( '/repair', ( req, res ) => {\n    res.sendStatus( 200 );\n  } );\n\n  return routes;\n}\n"],"sourceRoot":"/Users/swr/git/stefanwalther/flyway-rest/src"}