{"version":3,"sources":["middleware/validation.js"],"names":["validateParams","req","res","next","errors","body","flyway_args","push","url","length","status","json","error","details","end"],"mappings":";;;;;QAAgBA,c,GAAAA,c;AAAT,SAASA,cAAT,GAA0B;AAC/B,SAAO,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA2B;AAChC,QAAIC,SAAS,EAAb;;AAIA,QAAKH,IAAII,IAAJ,IAAY,CAACJ,IAAII,IAAJ,CAASC,WAA3B,EAAyC;AACvCF,aAAOG,IAAP,CAAa,2BAAb;AACD;;AAED,QAAKN,IAAII,IAAJ,CAASC,WAAT,IAAwB,CAACL,IAAII,IAAJ,CAASC,WAAT,CAAqBE,GAAnD,EAAyD;AACvDJ,aAAOG,IAAP,CAAa,4BAAb;AACD;;AAED;AACA,QAAKH,OAAOK,MAAP,GAAgB,CAArB,EAAyB;AACvBP,UAAIQ,MAAJ,CAAY,GAAZ;AACAR,UAAIS,IAAJ,CAAU;AACRC,eAAO,kCADC;AAERC,iBAAST;AAFD,OAAV;AAIAF,UAAIY,GAAJ;AACD,KAPD,MAOO;AACL,aAAOX,MAAP;AACD;AACF,GAxBD;AA0BD","file":"validation.js","sourcesContent":["export function validateParams() {\n  return function( req, res, next ) {\n    let errors = [];\n\n\n\n    if ( req.body && !req.body.flyway_args ) {\n      errors.push( 'Missing Flyway arguments.' );\n    }\n\n    if ( req.body.flyway_args && !req.body.flyway_args.url ) {\n      errors.push( 'Argument url is mandatory.' );\n    }\n\n    // Todo: Generalize restStatus\n    if ( errors.length > 0 ) {\n      res.status( 500 );\n      res.json( {\n        error: 'Validation of parameters failed.',\n        details: errors\n      } );\n      res.end();\n    } else {\n      return next();\n    }\n  };\n\n}\n"],"sourceRoot":"/Users/swr/git/stefanwalther/flyway-rest/src"}