{"version":3,"sources":["app-server.js"],"names":["appServer","init","expressApp","use","exposedHeaders","corsHeaders","json","limit","bodyLimit","done","server","port","process","env","PORT","console","log","listen","err","close"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;IAEqBA,S;AACnB,uBAAc;AAAA;;AACZ,SAAKC,IAAL;AACD;;;;2BAEM;AACL,WAAKC,UAAL,GAAkB,wBAAlB;;AAEA,WAAKA,UAAL,CAAgBC,GAAhB,CAAqB,oBAAM;AACzBC,wBAAgB,iBAAcC;AADL,OAAN,CAArB;;AAIA,WAAKH,UAAL,CAAgBC,GAAhB,CAAqB,qBAAWG,IAAX,CAAiB;AACpCC,eAAO,iBAAcC;AADe,OAAjB,CAArB;;AAIA,WAAKN,UAAL,CAAgBC,GAAhB,CAAqB,2CAArB;AAED;;;0BAEMM,I,EAAO;AAAA;;AACZ,UAAK,CAAC,KAAKC,MAAX,EAAoB;AAAA;AAClB,cAAIC,OAAOC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,iBAAcH,IAA7C;AACAI,kBAAQC,GAAR,CAAa,UAAb,EAAyBJ,QAAQC,GAAR,CAAYC,IAArC;AACA,gBAAKJ,MAAL,GAAc,MAAKR,UAAL,CAAgBe,MAAhB,CAAwBN,IAAxB,EAA8B,UAAEO,GAAF,EAAW;AACrD,gBAAK,CAACA,GAAN,EAAY;AACVH,sBAAQC,GAAR,sBAAgCL,IAAhC;AACD,aAFD,MAEO;AACLI,sBAAQC,GAAR,yBAAqCE,GAArC;AACD;AACD,mBAAOT,MAAP;AACD,WAPa,CAAd;AAHkB;AAWnB,OAXD,MAWO;AACLA;AACD;AAEF;;;2BAEM;AACL,UAAK,KAAKC,MAAV,EAAmB;AACjB,eAAO,KAAKA,MAAL,CAAYS,KAAZ,EAAP;AACD;AACF;;;;;;kBA1CkBnB,S","file":"app-server.js","sourcesContent":["import express from 'express';\nimport cors from 'cors';\nimport bodyParser from 'body-parser';\nimport middleware from './middleware';\nimport defaultConfig from './config.json';\n\nexport default class appServer {\n  constructor() {\n    this.init();\n  }\n\n  init() {\n    this.expressApp = express();\n\n    this.expressApp.use( cors( {\n      exposedHeaders: defaultConfig.corsHeaders\n    } ) );\n\n    this.expressApp.use( bodyParser.json( {\n      limit: defaultConfig.bodyLimit\n    } ) );\n\n    this.expressApp.use( middleware( defaultConfig ) );\n\n  }\n\n  start( done ) {\n    if ( !this.server ) {\n      let port = process.env.PORT || defaultConfig.port;\n      console.log( 'env.port', process.env.PORT );\n      this.server = this.expressApp.listen( port, ( err ) => {\n        if ( !err ) {\n          console.log( `Started on port ${port}.` );\n        } else {\n          console.log( `Cannot start server.`, err );\n        }\n        return done();\n      } );\n    } else {\n      done();\n    }\n\n  }\n\n  stop() {\n    if ( this.server ) {\n      return this.server.close();\n    }\n  }\n\n}\n\n"],"sourceRoot":"/Users/swr/git/stefanwalther/flyway-rest/src"}